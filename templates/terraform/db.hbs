resource "digitalocean_database_cluster" "{{stage}}-shared" {
  name       = "{{stage}}-shared"
  engine     = "pg"
  version    = "13"
  size       = "db-s-1vcpu-1gb"
  region     = var.region
  node_count = 1
}

data "digitalocean_database_ca" "{{stage}}-db-ca" {
  cluster_id = digitalocean_database_cluster.{{stage}}-shared.id
}

output "{{stage}}_shared_database_ca" {
  value = data.digitalocean_database_ca.{{stage}}-db-ca.certificate
}
